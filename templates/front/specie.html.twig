{% extends 'base.html.twig' %}
{% if is_granted('ROLE_ADMIN') %}
{% form_theme form 'materialize_layout.html.twig' %}
{% endif %}

{% block title %} {{ bird.lbName }} {% endblock %}

{% block body %}

    <div class="container">
        <div class="row">
            <div class="col m5 border-real">
                <img src="
                    {% if bird.image %}
                        {{ asset('assets/img/birds/'~bird.image) }}" alt="photo-especes" class="responsive-img border-teal">
                    {% else %}
                        {{ asset('assets/img/bg_espece_inconnue_gris_2.jpg') }}" alt="photo-especes" class="responsive-img border-teal">
                    {% endif %}

                {% if is_granted('ROLE_ADMIN') %}
                <div class="row center-align">
                    {{ form_start(form) }}
                        {% if form.image is defined %}
                            {{ form_row(form.image) }}
                            <button class="btn btn-round margin-bottom-light" type="submit">Enregistrer l'image</button>
                        {% endif %}
                        {% if form.delete_image is defined %}
                            {{ form_row(form.delete_image) }}
                        {% endif %}

                    {{ form_end(form) }}
                </div>
                {% endif %}
            </div>
            <div class="col m7 ">
                <div class="row">
                    <h1 class="little-h1">{{ bird.vernacularName }}</h1>
                </div>
                <div class="row z-depth-2" id="height-species-tabs">
                        <ul class="tabs z-depth-1">
                            <li class="tab tabs-fixed-width col m4"><a href="#last-observations">Dernières observations</a></li>
                            <li class="tab col m4"><a href="#a-propos">&Agrave; propos</a></li>
                            <li class="tab col m4"><a href="#identity">Fiche d'identité</a></li>
                        </ul>
                        <div class="row" id="last-observations">
                            <ul>
                                {% for observation in observations %}
                                    <ul class="col mini-margin">- Observé le {{ observation.observationDate|date("d/m/Y") }}</ul>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="row" id="a-propos">
                            <div class="col s12 m6 center">
                                <img id="height-species-img" class="responsive-img" src="{{ asset('assets/img/Logo_inpn.jpg') }}">
                            </div>
                            <div class="col s12 m6 margin-top center">
                                <a href="https://inpn.mnhn.fr/espece/cd_nom/{{ bird.cdName }}" target="_blank">
                                    <button class="btn btn-brown btn-round">Voir plus sur INPN</button>
                                </a>
                            </div>
                        </div>
                        <div class="row" id="identity">
                            <div class="col mini-margin"><i class="material-icons">subdirectory_arrow_right</i>Ordre : {{ bird.nameOrder }}</div>
                            <br>
                            <div class="col mini-margin"><i class="material-icons">subdirectory_arrow_right</i>Famille : {{ bird.family }}</div>
                            <br>
                            <div class="col mini-margin"><i class="material-icons">subdirectory_arrow_right</i>
                                {% if bird.rank == 'ES' %}
                                    Espèce : {{ bird.lbName }}
                                {% else %}
                                    Sous-espèce : {{ bird.lbName }}
                                {% endif %}
                            </div>
                        </div>
                </div>
            </div>
        </div>


        <div class="row margin-top z-depth-1">
            <div id="mapObser"></div>
        </div>
        <div class="row margin-top center">
            {% for observation in observations %}
                <div class="col s6 m4 l2">
                    <img id="again-mesure" src="{{ image_observation_directory}}/{{ observation.image }}" alt="photo-{{ observation.bird.vernacularName }}" class="border-teal specie-observation">
                </div>
            {% endfor %}
        </div>
    </div>



{% endblock %}